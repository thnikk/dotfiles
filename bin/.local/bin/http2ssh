#!/usr/bin/env sh
# Converts http git repo to ssh

# Get repo info
REMOTE=$(git remote -v | grep fetch | awk '{print $2}')
USER=$(echo "$REMOTE" | awk -F/ '{print $4}')
REPO=$(echo "$REMOTE" | awk -F/ '{print $5}')

echo "Current remote URL is: $REMOTE"

# Switch to ssh, otherwise do noting
case $REMOTE in
    *"https"*)
        # Echo relevant info to user
        echo "USER=$USER"
        echo "REPO=$REPO"
        echo "New URL is git@github.com:$USER/$REPO"
        git remote set-url origin "git@github.com:$USER/$REPO"
        echo "Changed to SSH."
        ;;
    *)
        echo "No change made, already using SSH."
        ;;
esac
